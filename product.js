const PRODUCT_ID_MAP = {
    "workshop": 8246,
    "workshop_trial": 1629,
    "camp_4day": 2063,
    "camp_5day": 924,
    "camp_1day": 2749
  };

const ID_PRODUCT_MAP = {
    8246 : {
        title : "Workshop"
    },
    1629 : {
        title : "Workshop Trial"
    }
}

function getTimeSlots(productId) {

    // will replace this with a backend call when we get there
    const records = [ { date: '2024-05-25T13:30',
    duration: 2,
    available: 6,
    booked: 2,
    product_id: 8246 },
    { date: '2024-05-27T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-05-28T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-06-01T13:30',
    duration: 2,
    available: 5,
    booked: 3,
    product_id: 8246 },
    { date: '2024-06-03T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-06-04T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-06-08T13:30',
    duration: 2,
    available: 5,
    booked: 3,
    product_id: 8246 },
    { date: '2024-06-10T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-06-11T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-06-15T13:30',
    duration: 2,
    available: 6,
    booked: 2,
    product_id: 8246 },
    { date: '2024-06-17T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-06-18T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-06-22T13:30',
    duration: 2,
    available: 6,
    booked: 2,
    product_id: 8246 },
    { date: '2024-06-24T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-06-25T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-06-29T13:30',
    duration: 2,
    available: 6,
    booked: 2,
    product_id: 8246 },
    { date: '2024-07-01T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-07-02T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-07-06T13:30',
    duration: 2,
    available: 7,
    booked: 1,
    product_id: 8246 },
    { date: '2024-07-08T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-07-09T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-07-13T13:30',
    duration: 2,
    available: 7,
    booked: 1,
    product_id: 8246 },
    { date: '2024-07-15T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-07-16T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-07-20T13:30',
    duration: 2,
    available: 7,
    booked: 1,
    product_id: 8246 },
    { date: '2024-07-22T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-07-23T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-07-27T13:30',
    duration: 2,
    available: 7,
    booked: 1,
    product_id: 8246 },
    { date: '2024-07-29T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-07-30T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-08-03T13:30',
    duration: 2,
    available: 7,
    booked: 1,
    product_id: 8246 },
    { date: '2024-08-05T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-08-06T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-08-10T13:30',
    duration: 2,
    available: 7,
    booked: 1,
    product_id: 8246 },
    { date: '2024-08-12T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-08-13T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-08-17T13:30',
    duration: 2,
    available: 7,
    booked: 1,
    product_id: 8246 },
    { date: '2024-08-19T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-08-20T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-08-24T13:30',
    duration: 2,
    available: 7,
    booked: 1,
    product_id: 8246 },
    { date: '2024-08-26T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-08-27T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-08-31T13:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-09-02T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-09-03T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-09-07T13:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-09-09T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-09-10T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-09-14T13:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-09-16T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-09-17T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-09-21T13:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 },
    { date: '2024-09-23T16:30',
    duration: 2,
    available: 8,
    booked: 0,
    product_id: 8246 } ];

    

    recordToHTML = records
    .filter(r => r.product_id === productId)
    .forEach(r => {
        let date = new Date(r.date);
        const mo = date.getMonth();
        const yr = date.getFullYear();
        const dt = date.getDate();
    
        robj = {
            date : date,
            html : `
            <h5 class="cal-event-header">${ID_PRODUCT_MAP[productId].title}</h5>
            <p class="cal-event-text">
            `
        }
    
        const monthsFromNow = (yr*12+mo) - now.getMonth;
        if (!dateEventMap[monthsFromNow]) {
            dateEventMap[monthsFromNow] = {
                dt : [r]
            }
        } 
        else if (!dateEventMap[monthsFromNow][dt]) {
            dateEventMap[monthsFromNow][dt] = [r];
        }
        else {
            dateEventMap[monthsFromNow][dt].push(r);
        }
    });;
}

// convert records into date -> html map
// for display next to calendar component
const now = new Date();
dateEventMap = {};


console.log(dateEventMap);